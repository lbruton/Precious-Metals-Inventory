<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>Lonnie's Precious Metals Tool</title>
<style>
    /* CSS Custom Properties */
    :root {
      --primary: #2563eb;
      --primary-hover: #1d4ed8;
      --secondary: #64748b;
      --secondary-hover: #475569;
      --success: #059669;
      --warning: #d97706;
      --danger: #dc2626;

      --bg-primary: #ffffff;
      --bg-secondary: #f8fafc;
      --bg-tertiary: #f1f5f9;
      --text-primary: #1e293b;
      --text-secondary: #64748b;
      --text-muted: #94a3b8;

      --border: #e2e8f0;
      --border-hover: #cbd5e1;
      --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
      --shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
      --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);

      --radius: 8px;
      --radius-lg: 12px;
      --transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    }

    [data-theme="dark"] {
      --primary: #3b82f6;
      --primary-hover: #2563eb;
      --secondary: #6b7280;
      --secondary-hover: #9ca3af;

      --bg-primary: #0f172a;
      --bg-secondary: #1e293b;
      --bg-tertiary: #334155;
      --text-primary: #f8fafc;
      --text-secondary: #cbd5e1;
      --text-muted: #94a3b8;

      --border: #334155;
      --border-hover: #475569;
      --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.3);
      --shadow: 0 4px 6px -1px rgb(0 0 0 / 0.3), 0 2px 4px -2px rgb(0 0 0 / 0.3);
      --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.3), 0 4px 6px -4px rgb(0 0 0 / 0.3);
    }

    /* Reset and Base Styles */
    *, *::before, *::after {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: var(--bg-primary);
      color: var(--text-primary);
      line-height: 1.6;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 2rem 1rem;
      transition: var(--transition);
    }

    /* Theme Toggle */
    .theme-toggle {
      position: fixed;
      top: 1.5rem;
      right: 1.5rem;
      background: var(--bg-secondary);
      border: 2px solid var(--border);
      border-radius: 9999px;
      width: 60px;
      height: 32px;
      cursor: pointer;
      transition: var(--transition);
      box-shadow: var(--shadow-sm);
      z-index: 1000;
    }

    .theme-toggle::before {
      content: '‚òÄÔ∏è';
      position: absolute;
      top: 4px;
      left: 6px;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: var(--primary);
      transition: var(--transition);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 10px;
    }

    [data-theme="dark"] .theme-toggle::before {
      content: 'üåô';
      transform: translateX(26px);
    }

    .theme-toggle:hover {
      border-color: var(--primary);
      box-shadow: var(--shadow);
    }

    /* Main Container */
    .container {
      max-width: 600px;
      width: 100%;
      display: flex;
      flex-direction: column;
      gap: 2rem;
    }

    /* Card Styles */
    .card {
      background: var(--bg-secondary);
      border: 1px solid var(--border);
      border-radius: var(--radius-lg);
      padding: 2rem;
      box-shadow: var(--shadow);
      transition: var(--transition);
    }

    .card:hover {
      box-shadow: var(--shadow-lg);
    }

    /* Typography */
    .title {
      font-size: 2rem;
      font-weight: 700;
      text-align: center;
      margin-bottom: 1rem;
      color: var(--primary);
      background: linear-gradient(135deg, var(--primary), var(--success));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .subtitle {
      font-size: 1.25rem;
      font-weight: 600;
      margin-bottom: 1rem;
      color: var(--text-primary);
    }

    .description {
      color: var(--text-secondary);
      margin-bottom: 1.5rem;
      font-size: 1rem;
    }

    /* Alert/Disclaimer */
    .alert {
      background: linear-gradient(135deg, #fef2f2, #fff8f8);
      border: 1px solid #fecaca;
      border-left: 4px solid var(--danger);
      padding: 1rem;
      border-radius: var(--radius);
      margin: 1.5rem 0;
      position: relative;
      overflow: hidden;
    }

    [data-theme="dark"] .alert {
      background: linear-gradient(135deg, #2d1b1b, #1f1717);
      border-color: #991b1b;
      color: var(--text-secondary);
    }

    .alert::before {
      content: '‚ö†Ô∏è';
      font-size: 1.2rem;
      margin-right: 0.5rem;
    }

    .alert strong {
      display: inline-flex;
      align-items: center;
      color: var(--danger);
      margin-bottom: 0.5rem;
    }

    /* Form Elements */
    .form-group {
      margin: 1.5rem 0;
    }

    .form-label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 500;
      color: var(--text-primary);
      font-size: 0.875rem;
      text-transform: uppercase;
      letter-spacing: 0.025em;
    }

    .form-select {
      width: 100%;
      padding: 0.75rem 1rem;
      border: 2px solid var(--border);
      border-radius: var(--radius);
      background: var(--bg-primary);
      color: var(--text-primary);
      font-size: 1rem;
      cursor: pointer;
      transition: var(--transition);
      appearance: none;
      background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e");
      background-position: right 0.5rem center;
      background-repeat: no-repeat;
      background-size: 1.5em 1.5em;
      padding-right: 2.5rem;
    }

    .form-select:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgb(59 130 246 / 0.1);
    }

    /* Buttons */
    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      padding: 0.75rem 1.5rem;
      border: none;
      border-radius: var(--radius);
      font-size: 1rem;
      font-weight: 500;
      text-decoration: none;
      cursor: pointer;
      transition: var(--transition);
      position: relative;
      overflow: hidden;
    }

    .btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
      transition: left 0.5s;
    }

    .btn:hover::before {
      left: 100%;
    }

    .btn-primary {
      background: linear-gradient(135deg, var(--primary), var(--primary-hover));
      color: white;
      box-shadow: var(--shadow-sm);
    }

    .btn-primary:hover {
      transform: translateY(-1px);
      box-shadow: var(--shadow);
    }

    .btn-secondary {
      background: var(--bg-tertiary);
      color: var(--text-primary);
      border: 1px solid var(--border);
    }

    .btn-secondary:hover {
      background: var(--border);
      border-color: var(--border-hover);
    }

    .btn-block {
      width: 100%;
    }

    .btn + .btn {
      margin-top: 0.75rem;
    }

    /* Modal */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.6);
      backdrop-filter: blur(4px);
      z-index: 9999;
      align-items: center;
      justify-content: center;
      padding: 1rem;
    }

    .modal-content {
      background: var(--bg-secondary);
      border: 1px solid var(--border);
      border-radius: var(--radius-lg);
      max-width: 700px;
      width: 100%;
      max-height: 90vh;
      overflow-y: auto;
      position: relative;
      box-shadow: var(--shadow-lg);
      animation: modalSlideIn 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    @keyframes modalSlideIn {
      from {
        opacity: 0;
        transform: scale(0.95) translateY(-20px);
      }
      to {
        opacity: 1;
        transform: scale(1) translateY(0);
      }
    }

    .modal-header {
      padding: 1.5rem 2rem;
      border-bottom: 1px solid var(--border);
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .modal-title {
      font-size: 1.5rem;
      font-weight: 600;
      color: var(--primary);
      margin: 0;
    }

    .modal-close {
      background: none;
      border: none;
      font-size: 1.5rem;
      color: var(--text-muted);
      cursor: pointer;
      padding: 0.25rem;
      border-radius: var(--radius);
      transition: var(--transition);
    }

    .modal-close:hover {
      color: var(--text-primary);
      background: var(--bg-tertiary);
    }

    .modal-body {
      padding: 2rem;
    }

    /* Changelog Specific Styles */
    .roadmap-section {
      background: linear-gradient(135deg, #dbeafe, #bfdbfe);
      border: 1px solid #93c5fd;
      border-left: 4px solid var(--primary);
      border-radius: var(--radius);
      padding: 1.5rem;
      margin-bottom: 1.5rem;
    }

    [data-theme="dark"] .roadmap-section {
      background: linear-gradient(135deg, #1e3a8a, #1e40af);
      border-color: var(--primary);
    }

    .version-section {
      background: var(--bg-tertiary);
      border: 1px solid var(--border);
      border-left: 4px solid var(--success);
      border-radius: var(--radius);
      padding: 1.5rem;
      margin-bottom: 1.25rem;
    }

    .section-title {
      font-weight: 600;
      margin-bottom: 0.75rem;
      color: var(--text-primary);
    }

    .changelog-list {
      margin: 0.5rem 0;
      padding-left: 1.25rem;
    }

    .changelog-list li {
      margin-bottom: 0.25rem;
      color: var(--text-secondary);
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      body {
        padding: 1rem 0.5rem;
      }

      .theme-toggle {
        top: 1rem;
        right: 1rem;
        width: 50px;
        height: 28px;
      }

      .theme-toggle::before {
        width: 18px;
        height: 18px;
        top: 3px;
        left: 5px;
      }

      [data-theme="dark"] .theme-toggle::before {
        transform: translateX(20px);
      }

      .card {
        padding: 1.5rem;
      }

      .title {
        font-size: 1.75rem;
      }

      .modal-content {
        margin: 0.5rem;
        max-height: 95vh;
      }

      .modal-header, .modal-body {
        padding: 1.5rem;
      }
    }
  </style>
</head>
<body>
<div class="theme-toggle" id="theme-toggle" title="Toggle theme"></div>
<div class="container">
<div class="card">
<h1 class="title" id="page-title">Lonnie's Precious Metals Tool</h1>
<p class="description">
        Track your precious metal investments with spot price tracking, premium calculations, and comprehensive reporting. Add items to your inventory, monitor current values, and export your data in multiple formats.
      </p>
<div class="alert">
<strong>Important Notice:</strong> All data is stored locally in your browser and never transmitted to any server. Your information remains private but will be lost if you clear browser history or use private browsing mode. Use this tool at your own risk - the developer assumes no responsibility for any financial decisions made based on this application.
      </div>
<div class="form-group">
<label class="form-label" for="version-select">Select Version</label>
<select class="form-select" id="version-select">
<option value="1.0">Version 1.0</option>
<option value="2.0">Version 2.0</option>
<option value="2.1">Version 2.1</option>
<option value="2.2">Version 2.2</option>
<option value="2.3">Version 2.3</option>
<option value="2.4">Version 2.4</option>
<option value="2.5">Version 2.5</option>
<option value="2.6">Version 2.6</option>
<option value="2.7">Version 2.7</option>
<option selected="" value="2.8">Version 2.8</option>
</select>
</div>
<a class="btn btn-primary btn-block" href="https://lonniebruton.com/pmtools/2.7/index.html" id="continue-btn">
        Accept and Continue ‚Üí
      </a>
</div>
<div class="card">
<h2 class="subtitle">Resources</h2>
<a class="btn btn-secondary btn-block" download="sample.csv" href="sample.csv">
        üìÑ Download Sample Data
      </a>
<button class="btn btn-secondary btn-block" id="showChangelog">
        üìú View Changelog &amp; Roadmap
      </button>
</div>
</div>
<!-- Changelog Modal -->
<div aria-labelledby="modal-title" aria-modal="true" class="modal" id="changelogModal" role="dialog">
<div class="modal-content">
<div class="modal-header">
<h2 class="modal-title" id="modal-title">üìú Changelog &amp; Roadmap</h2>
<button aria-label="Close modal" class="modal-close" id="closeChangelog">√ó</button>
</div>
<div class="modal-body">
<div class="roadmap-section">
<div class="section-title">üöÄ Roadmap</div>
<ul class="changelog-list">

<li><strong>2.9:</strong> Introduce item storage location fields for improved inventory organization.</li>
<li><strong>3.0:</strong> Implement live updates for precious metals spot prices.</li>
</ul>
</div>
<!-- Reordered changelog versions start here -->
<div class="version-section">
<div class="section-title">Version 2.8 - Modular Overhaul</div>
<ul class="changelog-list">
<li>Major codebase refactor: extracted scripts into modular JS files for better separation of concerns.</li>
<li>CSS moved to external <code>styles.css</code>, enabling improved maintainability and theming.</li>
<li>Full dark mode support via <code>theme.js</code> and CSS variables.</li>
<li>Integrated Chart.js for pie chart visualization of inventory.</li>
<li>Improved pagination, search, and sorting capabilities for inventory tables.</li>
<li>Improved UI structure with deferred script loading and performance tweaks.</li>
</ul>
</div>
<div class="version-section">
<div class="section-title">Version 2.6-2.7 - Details &amp; Analytics</div>
<ul class="changelog-list">
<li>Minor updates and maintenance (most changes under-the-hood).</li>
<li>Added "View Details" button on all metal summary cards.</li>
<li>Introduced breakdown reports by type and by purchase location.</li>
<li>Enhanced navigation, interface organization, and information visibility.</li>
<li>Core feature set and detailed inventory management preserved.</li>
</ul>
</div>
<div class="version-section">
<div class="section-title">Version 2.4-2.5 - Multi-Metal Support</div>
<ul class="changelog-list">
<li>Support introduced for Platinum and Palladium metals throughout the tool.</li>
<li>All entry fields, summaries, and calculation logic expanded for four metals.</li>
<li>Exported data now includes Platinum and Palladium records.</li>
<li>Enhanced UI to integrate new metals into inventory and reporting.</li>
<li>Interface and calculation consistency improvements for all metals.</li>
<li>Price and premium breakdowns standardized for collectable/non-collectable.</li>
</ul>
</div>
<div class="version-section">
<div class="section-title">Version 2.1-2.3 - Collectables &amp; Polish</div>
<ul class="changelog-list">
<li>Introduced marking items as "Collectable" with enhanced price breakdowns.</li>
<li>Average collectable and non-collectable price per oz calculations.</li>
<li>Inventory and report tables updated to show collectable status.</li>
<li>Added clarifying notes for collectable items and improved edit interface.</li>
<li>Refined summary sections with breakdowns by collectable status.</li>
<li>Usability and layout improvements for summary, import/export, and inventory actions.</li>
</ul>
</div>
<div class="version-section">
<div class="section-title">Version 2.0 - Major Update</div>
<ul class="changelog-list">
<li>Expanded tracking for Silver and Gold (type, quantity, weight, and name fields).</li>
<li>Added individual and combined totals with calculations for weight, purchase price, value, average price per oz, premium per oz, total premiums, and profit/loss.</li>
<li>Enhanced inventory table with editable, deletable entries and sorting.</li>
<li>Introduced support for different types: Round, Bar, Coin, Note, Other.</li>
<li>Import and export options for CSV, JSON, Excel, PDF, and HTML formats.</li>
<li>Added "Spot Price History" to track historical changes.</li>
<li>Implemented "Dark Mode" for the UI.</li>
<li>Annotation for "Collectable" items in inventory.</li>
<li>Introduced the "Boating Accident" reset feature.</li>
<li>Pagination controls for large inventories and improved layout clarity.</li>
</ul>
</div>
<div class="version-section">
<div class="section-title">Version 1.0 - Initial Release</div>
<ul class="changelog-list">
<li>Track inventory for Silver and Gold.</li>
<li>Add items with details: type, quantity, weight (oz), name, purchase location, purchase price, and date.</li>
<li>See total item count, total weight, total purchase price, and current value for each metal.</li>
<li>Calculate average price per ounce and show basic profit/loss per metal.</li>
<li>Edit or delete items from inventory.</li>
<li>Basic, clean interface with inventory listing and summary sections.</li>
</ul>
</div>
<!-- Reordered changelog versions end here -->
</div>
</div>
</div>
<script>
    // Theme Management
    const themeToggle = document.getElementById('theme-toggle');

    function setTheme(theme) {
      document.documentElement.setAttribute('data-theme', theme);
      localStorage.setItem('theme', theme);
    }

    function toggleTheme() {
      const currentTheme = document.documentElement.getAttribute('data-theme');
      setTheme(currentTheme === 'dark' ? 'light' : 'dark');
    }

    function initTheme() {
      const savedTheme = localStorage.getItem('theme');
      const systemPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;

      if (savedTheme) {
        setTheme(savedTheme);
      } else if (systemPrefersDark) {
        setTheme('dark');
      } else {
        setTheme('light');
      }
    }

    // Version Management
    const versionSelect = document.getElementById('version-select');
    const continueBtn = document.getElementById('continue-btn');
    const pageTitle = document.getElementById('page-title');

    function updateVersion() {
      const selectedVersion = versionSelect.value;
      continueBtn.href = `https://lonniebruton.com/pmtools/${selectedVersion}/`;
      pageTitle.textContent = `Lonnie's Precious Metals Tool v${selectedVersion}`;
    }

    // Modal Management
    const showChangelogBtn = document.getElementById('showChangelog');
    const changelogModal = document.getElementById('changelogModal');
    const closeChangelogBtn = document.getElementById('closeChangelog');

    function showModal() {
      changelogModal.style.display = 'flex';
      document.body.style.overflow = 'hidden';
    }

    function hideModal() {
      changelogModal.style.display = 'none';
      document.body.style.overflow = '';
    }

    // Event Listeners
    themeToggle.addEventListener('click', toggleTheme);
    versionSelect.addEventListener('change', updateVersion);
    showChangelogBtn.addEventListener('click', showModal);
    closeChangelogBtn.addEventListener('click', hideModal);

    changelogModal.addEventListener('click', (e) => {
      if (e.target === changelogModal) hideModal();
    });

    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') hideModal();
    });

    // System theme change listener
    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
      if (!localStorage.getItem('theme')) {
        setTheme(e.matches ? 'dark' : 'light');
      }
    });

    // Initialize
    initTheme();
    updateVersion();
  </script>
</body>
</html>
