<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1, minimum-scale=1, user-scalable=yes" name="viewport"/>
<meta content="default-src 'self' 'unsafe-inline' 'unsafe-eval' https://cdnjs.cloudflare.com; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://cdnjs.cloudflare.com;" http-equiv="Content-Security-Policy"/>
<title>Precious Metals Inventory Tool 2.8c</title>
<!-- External libraries for data import/export functionality -->
<script defer="" src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
<script defer="" src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
<script defer="" src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script defer="" src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.25/jspdf.plugin.autotable.min.js"></script>
<!-- Chart.js for pie charts -->
<script defer="" src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>

  <link rel="stylesheet" href="css/styles.css">
</head>
<body>
<!-- Application Header -->
<div class="app-header">
<h1>Precious Metals Inventory Tool 2.8</h1>
<div style="margin-left: auto;">
<button class="btn" id="themeToggle">Dark Mode</button>
</div>
</div>
<div class="container">
<!-- =============================================================================
         SPOT PRICES SECTION
         ============================================================================= -->
<section class="spot-prices">
<div class="grid" style="grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 1rem;">
<!-- Silver spot price controls -->
<div class="spot-input silver">
<div class="spot-card">
<div class="spot-card-label">Current Spot Price</div>
<div class="spot-card-value" id="spotPriceDisplaySilver">$ -</div>
</div>
<label for="userSpotPriceSilver">Silver Spot Price</label>
<div class="currency-input">
<input id="userSpotPriceSilver" min="0" placeholder="Set spot $" step="0.01" type="number"/>
</div>
<div class="grid grid-2">
<button class="btn" id="saveSpotBtnSilver">Save</button>
<button class="btn" id="resetSpotBtnSilver">Reset</button>
</div>
</div>
<!-- Gold spot price controls -->
<div class="spot-input gold">
<div class="spot-card">
<div class="spot-card-label">Current Spot Price</div>
<div class="spot-card-value" id="spotPriceDisplayGold">$ -</div>
</div>
<label for="userSpotPriceGold">Gold Spot Price</label>
<div class="currency-input">
<input id="userSpotPriceGold" min="0" placeholder="Set spot $" step="0.01" type="number"/>
</div>
<div class="grid grid-2">
<button class="btn" id="saveSpotBtnGold">Save</button>
<button class="btn" id="resetSpotBtnGold">Reset</button>
</div>
</div>
<!-- Platinum spot price controls -->
<div class="spot-input platinum">
<div class="spot-card">
<div class="spot-card-label">Current Spot Price</div>
<div class="spot-card-value" id="spotPriceDisplayPlatinum">$ -</div>
</div>
<label for="userSpotPricePlatinum">Platinum Spot Price</label>
<div class="currency-input">
<input id="userSpotPricePlatinum" min="0" placeholder="Set spot $" step="0.01" type="number"/>
</div>
<div class="grid grid-2">
<button class="btn" id="saveSpotBtnPlatinum">Save</button>
<button class="btn" id="resetSpotBtnPlatinum">Reset</button>
</div>
</div>
<!-- Palladium spot price controls -->
<div class="spot-input palladium">
<div class="spot-card">
<div class="spot-card-label">Current Spot Price</div>
<div class="spot-card-value" id="spotPriceDisplayPalladium">$ -</div>
</div>
<label for="userSpotPricePalladium">Palladium Spot Price</label>
<div class="currency-input">
<input id="userSpotPricePalladium" min="0" placeholder="Set spot $" step="0.01" type="number"/>
</div>
<div class="grid grid-2">
<button class="btn" id="saveSpotBtnPalladium">Save</button>
<button class="btn" id="resetSpotBtnPalladium">Reset</button>
</div>
</div>
</div>
</section>
<!-- =============================================================================
         TOTALS SECTION
         ============================================================================= -->
<section class="totals-section">
<div class="totals">
<!-- Silver totals card -->
<div class="total-card silver">
<div class="total-title">Silver Totals</div>
<div class="total-group">
<div class="total-item">
<span class="total-label">Total Items:</span>
<span class="total-value" id="totalItemsSilver">0</span>
</div>
<div class="total-item">
<span class="total-label">Total Weight:</span>
<span class="total-value" id="totalWeightSilver">0.00</span> oz
            </div>
</div>
<div class="total-group">
<div class="total-item">
<span class="total-label">Purchase Price:</span>
<span class="total-value" id="totalPurchasedSilver">$0.00</span>
</div>
<div class="total-item">
<span class="total-label">Current Value:</span>
<span class="total-value" id="currentValueSilver">$0.00</span>
</div>
<div class="total-item">
<span class="total-label">Average Price (oz):</span>
<span class="total-value" id="avgPriceSilver">$0.00</span>
</div>
<div class="total-item">
<span class="total-label">Average Collectable Price (oz):</span>
<span class="total-value" id="avgCollectablePriceSilver">$0.00</span>
</div>
<div class="total-item">
<span class="total-label">Average Non-collectable Price (oz):</span>
<span class="total-value" id="avgNonCollectablePriceSilver">$0.00</span>
</div>
<div class="total-item">
<span class="total-label">Average Premium (oz):</span>
<span class="total-value" id="avgPremiumSilver">$0.00</span>
</div>
</div>
<div class="total-group">
<div class="total-item">
<span class="total-label">Total Premium Paid:</span>
<span class="total-value" id="totalPremiumSilver">$0.00</span>
</div>
<div class="total-item">
<span class="total-label">Total Loss/Profit:</span>
<span class="total-value" id="lossProfitSilver">$0.00</span>
</div>
</div>
<button class="details-btn" onclick="showDetailsModal('Silver')">View Details</button>
</div>
<!-- Gold totals card -->
<div class="total-card gold">
<div class="total-title">Gold Totals</div>
<div class="total-group">
<div class="total-item">
<span class="total-label">Total Items:</span>
<span class="total-value" id="totalItemsGold">0</span>
</div>
<div class="total-item">
<span class="total-label">Total Weight:</span>
<span class="total-value" id="totalWeightGold">0.00</span> oz
            </div>
</div>
<div class="total-group">
<div class="total-item">
<span class="total-label">Purchase Price:</span>
<span class="total-value" id="totalPurchasedGold">$0.00</span>
</div>
<div class="total-item">
<span class="total-label">Current Value:</span>
<span class="total-value" id="currentValueGold">$0.00</span>
</div>
<div class="total-item">
<span class="total-label">Average Price (oz):</span>
<span class="total-value" id="avgPriceGold">$0.00</span>
</div>
<div class="total-item">
<span class="total-label">Average Collectable Price (oz):</span>
<span class="total-value" id="avgCollectablePriceGold">$0.00</span>
</div>
<div class="total-item">
<span class="total-label">Average Non-collectable Price (oz):</span>
<span class="total-value" id="avgNonCollectablePriceGold">$0.00</span>
</div>
<div class="total-item">
<span class="total-label">Average Premium (oz):</span>
<span class="total-value" id="avgPremiumGold">$0.00</span>
</div>
</div>
<div class="total-group">
<div class="total-item">
<span class="total-label">Total Premium Paid:</span>
<span class="total-value" id="totalPremiumGold">$0.00</span>
</div>
<div class="total-item">
<span class="total-label">Total Loss/Profit:</span>
<span class="total-value" id="lossProfitGold">$0.00</span>
</div>
</div>
<button class="details-btn" onclick="showDetailsModal('Gold')">View Details</button>
</div>
<!-- Platinum totals card -->
<div class="total-card platinum">
<div class="total-title">Platinum Totals</div>
<div class="total-group">
<div class="total-item">
<span class="total-label">Total Items:</span>
<span class="total-value" id="totalItemsPlatinum">0</span>
</div>
<div class="total-item">
<span class="total-label">Total Weight:</span>
<span class="total-value" id="totalWeightPlatinum">0.00</span>
</div>
</div>
<div class="total-group">
<div class="total-item">
<span class="total-label">Purchase Price:</span>
<span class="total-value" id="totalPurchasedPlatinum">$0.00</span>
</div>
<div class="total-item">
<span class="total-label">Current Value:</span>
<span class="total-value" id="currentValuePlatinum">$0.00</span>
</div>
<div class="total-item">
<span class="total-label">Average Price (oz):</span>
<span class="total-value" id="avgPricePlatinum">$0.00</span>
</div>
<div class="total-item">
<span class="total-label">Average Collectable Price (oz):</span>
<span class="total-value" id="avgCollectablePricePlatinum">$0.00</span>
</div>
<div class="total-item">
<span class="total-label">Average Non-collectable Price (oz):</span>
<span class="total-value" id="avgNonCollectablePricePlatinum">$0.00</span>
</div>
<div class="total-item">
<span class="total-label">Average Premium (oz):</span>
<span class="total-value" id="avgPremiumPlatinum">$0.00</span>
</div>
</div>
<div class="total-group">
<div class="total-item">
<span class="total-label">Total Premium Paid:</span>
<span class="total-value" id="totalPremiumPlatinum">$0.00</span>
</div>
<div class="total-item">
<span class="total-label">Total Loss/Profit:</span>
<span class="total-value" id="lossProfitPlatinum">$0.00</span>
</div>
</div>
<button class="details-btn" onclick="showDetailsModal('Platinum')">View Details</button>
</div>
<!-- Palladium totals card -->
<div class="total-card palladium">
<div class="total-title">Palladium Totals</div>
<div class="total-group">
<div class="total-item">
<span class="total-label">Total Items:</span>
<span class="total-value" id="totalItemsPalladium">0</span>
</div>
<div class="total-item">
<span class="total-label">Total Weight:</span>
<span class="total-value" id="totalWeightPalladium">0.00</span> oz
            </div>
</div>
<div class="total-group">
<div class="total-item">
<span class="total-label">Purchase Price:</span>
<span class="total-value" id="totalPurchasedPalladium">$0.00</span>
</div>
<div class="total-item">
<span class="total-label">Current Value:</span>
<span class="total-value" id="currentValuePalladium">$0.00</span>
</div>
<div class="total-item">
<span class="total-label">Average Price (oz):</span>
<span class="total-value" id="avgPricePalladium">$0.00</span>
</div>
<div class="total-item">
<span class="total-label">Average Collectable Price (oz):</span>
<span class="total-value" id="avgCollectablePricePalladium">$0.00</span>
</div>
<div class="total-item">
<span class="total-label">Average Non-collectable Price (oz):</span>
<span class="total-value" id="avgNonCollectablePricePalladium">$0.00</span>
</div>
<div class="total-item">
<span class="total-label">Average Premium (oz):</span>
<span class="total-value" id="avgPremiumPalladium">$0.00</span>
</div>
</div>
<div class="total-group">
<div class="total-item">
<span class="total-label">Total Premium Paid:</span>
<span class="total-value" id="totalPremiumPalladium">$0.00</span>
</div>
<div class="total-item">
<span class="total-label">Total Loss/Profit:</span>
<span class="total-value" id="lossProfitPalladium">$0.00</span>
</div>
</div>
<button class="details-btn" onclick="showDetailsModal('Palladium')">View Details</button>
</div>
</div>
</section>
<!-- =============================================================================
         INVENTORY FORM SECTION
         ============================================================================= -->
<section class="form-section">
<form id="inventoryForm">
<!-- First row of form fields -->
<div class="grid grid-2">
<div>
<label for="itemMetal">Metal</label>
<select id="itemMetal">
<option value="Silver">Silver</option>
<option value="Gold">Gold</option>
<option value="Platinum">Platinum</option>
<option value="Palladium">Palladium</option>
</select>
</div>
<div>
<label for="itemType">Type</label>
<select id="itemType">
<option value="Round">Round</option>
<option value="Bar">Bar</option>
<option value="Coin">Coin</option>
<option value="Note">Note</option>
<option value="Other">Other</option>
</select>
</div>
<div>
<label for="itemQty">Quantity</label>
<input id="itemQty" min="1" required="" step="1" type="number"/>
</div>
<div>
<label for="itemWeight">Weight (oz)</label>
<input id="itemWeight" min="0.0001" required="" step="0.0001" type="number"/>
</div>
</div>
<!-- Second row of form fields -->
<div class="grid grid-2">
<div>
<label for="itemName">Name</label>
<input id="itemName" required="" type="text"/>
</div>
<div>
<label for="purchaseLocation">Purchase Location</label>
<input id="purchaseLocation" required="" type="text"/>
</div>
<div>
<label for="itemPrice">Purchase Price ($)</label>
<div class="currency-input">
<input id="itemPrice" min="0" required="" step="0.01" type="number"/>
</div>
</div>
<div>
<label for="itemDate">Purchase Date</label>
<input id="itemDate" required="" type="date"/>
</div>
</div>
<!-- Form submission button -->
<div style="margin-top: 0.5rem;">
<button class="btn" type="submit">Add to Inventory</button>
</div>
</form>
</section>
<!-- =============================================================================
         SEARCH FUNCTIONALITY
         ============================================================================= -->
<section class="search-section">
<div class="search-container">
<input id="searchInput" placeholder="Search inventory by metal, name, type, location, date..." type="text"/>
<button class="btn" id="clearSearchBtn">Clear</button>
</div>
<div class="search-results-info" id="searchResultsInfo"></div>
</section>
<!-- =============================================================================
         INVENTORY TABLE SECTION
         ============================================================================= -->
<section class="table-section">
<table id="inventoryTable">
<thead>
<tr>
<th>#</th>
<th>Metal</th>
<th>Qty</th>
<th>Type</th>
<th>Name</th>
<th>Weight (oz)</th>
<th>Purchase Price ($)</th>
<th>Spot Price ($/oz)</th>
<th>Premium Paid ($/oz)</th>
<th>Total Premium Paid ($)</th>
<th>Purchase Location</th>
<th>Date</th>
<th>Collectable</th>
<th>Edit</th>
<th>Delete</th>
</tr>
</thead>
<tbody></tbody>
</table>
<!-- Pagination Controls -->
<section class="pagination-section">
<div class="pagination-container">
<div class="pagination-controls">
<div class="pagination-buttons">
<button class="pagination-btn" id="firstPage" title="First Page">«</button>
<button class="pagination-btn" id="prevPage" title="Previous Page">‹</button>
<div class="page-numbers" id="pageNumbers"></div>
<button class="pagination-btn" id="nextPage" title="Next Page">›</button>
<button class="pagination-btn" id="lastPage" title="Last Page">»</button>
</div>
<div class="pagination-info-controls">
<span class="pagination-info" id="paginationInfo">1 of 1</span>
<select class="pagination-select" id="itemsPerPage">
<option selected="" value="10">10</option>
<option value="15">15</option>
<option value="25">25</option>
<option value="50">50</option>
<option value="100">100</option>
</select>
</div>
</div>
</div>
</section>
</section>
<!-- =============================================================================
         IMPORT/EXPORT SECTION
         ============================================================================= -->
<section class="import-export-section">
<h2>Import Options</h2>
<div class="import-section import-export-grid">
<label class="btn" id="importCsvBtn">
          Import CSV
          <input accept=".csv" hidden="" id="importCsvFile" type="file"/>
</label>
<label class="btn" id="importJsonBtn">
          Import JSON
          <input accept=".json" hidden="" id="importJsonFile" type="file"/>
</label>
<label class="btn" id="importExcelBtn">
          Import Excel
          <input accept=".xlsx,.xls" hidden="" id="importExcelFile" type="file"/>
</label>
</div>
<h2>Export Options</h2>
<div class="export-section import-export-grid">
<button class="btn" id="exportCsvBtn">Export CSV</button>
<button class="btn" id="exportJsonBtn">Export JSON</button>
<button class="btn" id="exportExcelBtn">Export Excel</button>
<button class="btn" id="exportPdfBtn">Export PDF</button>
<button class="btn" id="exportHtmlBtn">Export HTML</button>
</div>
</section>
<!-- =============================================================================
         SPOT HISTORY SECTION
         ============================================================================= -->
<section class="spot-history-section">
<h2 style="margin-bottom: 0.75rem; text-align: center; font-size: 1.125rem; color: var(--primary);">Spot Price History</h2>
<div class="spot-history-buttons">
<button class="btn" id="showSpotHistoryBtn">Show Spot History</button>
<button class="btn danger" id="clearSpotHistoryBtn">Clear Spot History</button>
</div>
</section>
</div>
<!-- "Boating Accident" feature -->
<section class="boating-accident-section">
<button id="boatingAccidentBtn">Boating Accident</button>
</section>
<!-- =============================================================================
       EDIT MODAL
       ============================================================================= -->
<div class="modal" id="editModal" style="display: none;">
<div class="modal-content">
<h2 style="margin-bottom: 1rem; color: var(--primary);">Edit Inventory Item</h2>
<form id="editForm">
<!-- First row of edit form fields -->
<div class="grid grid-2">
<div>
<label for="editMetal">Metal</label>
<select id="editMetal">
<option value="Silver">Silver</option>
<option value="Gold">Gold</option>
<option value="Platinum">Platinum</option>
<option value="Palladium">Palladium</option>
</select>
</div>
<div>
<label for="editType">Type</label>
<select id="editType">
<option value="Round">Round</option>
<option value="Bar">Bar</option>
<option value="Coin">Coin</option>
<option value="Note">Note</option>
<option value="Other">Other</option>
</select>
</div>
<div>
<label for="editQty">Quantity</label>
<input id="editQty" min="1" required="" step="1" type="number"/>
</div>
<div>
<label for="editWeight">Weight (oz)</label>
<input id="editWeight" min="0.0001" required="" step="0.0001" type="number"/>
</div>
</div>
<!-- Second row of edit form fields -->
<div class="grid grid-2">
<div>
<label for="editName">Name</label>
<input id="editName" required="" type="text"/>
</div>
<div>
<label for="editPurchaseLocation">Purchase Location</label>
<input id="editPurchaseLocation" required="" type="text"/>
</div>
<div>
<label for="editPrice">Purchase Price ($)</label>
<div class="currency-input">
<input id="editPrice" min="0" required="" step="0.01" type="number"/>
</div>
</div>
<div>
<label for="editDate">Purchase Date</label>
<input id="editDate" required="" type="date"/>
</div>
</div>
<!-- Special field for editing historical spot prices -->
<div class="grid grid-2">
<div>
<label for="editSpotPrice">Spot Price ($/oz)</label>
<div class="currency-input">
<input id="editSpotPrice" min="0" required="" step="0.01" type="number"/>
</div>
</div>
</div>
<!-- Collectable toggle -->
<div style="margin-top: 0.5rem;">
<label for="editCollectable">Collectable Item</label>
<label class="switch">
<input id="editCollectable" type="checkbox"/>
<span class="slider"></span>
</label>
<div class="collectable-explanation">
            Collectable items may have additional numismatic value beyond their metal content
          </div>
</div>
<!-- Form action buttons -->
<div style="margin-top: 1rem; text-align: right;">
<button class="btn" id="cancelEdit" type="button">Cancel</button>
<button class="btn premium" type="submit">Save Changes</button>
</div>
</form>
</div>
</div>
<!-- =============================================================================
       DETAILS MODAL WITH PIE CHARTS
       ============================================================================= -->
<div class="modal" id="detailsModal" style="display: none;">
<div class="details-modal-content">
<h2 class="details-modal-title" id="detailsModalTitle"></h2>
<!-- Pie Charts Section -->
<div class="charts-section">
<div class="chart-container">
<div class="chart-title">Breakdown by Type</div>
<div class="chart-canvas-container">
<canvas class="chart-canvas" id="typeChart"></canvas>
</div>
</div>
<div class="chart-container">
<div class="chart-title">Breakdown by Purchase Location</div>
<div class="chart-canvas-container">
<canvas class="chart-canvas" id="locationChart"></canvas>
</div>
</div>
</div>
<!-- Data Tables Section -->
<div class="details-content">
<!-- Type breakdown column -->
<div class="details-section">
<div class="details-section-title">Type Details</div>
<div class="details-breakdown" id="typeBreakdown">
<!-- Content will be populated by JavaScript -->
</div>
</div>
<!-- Location breakdown column -->
<div class="details-section">
<div class="details-section-title">Location Details</div>
<div class="details-breakdown" id="locationBreakdown">
<!-- Content will be populated by JavaScript -->
</div>
</div>
</div>
<button class="close-details-btn" onclick="closeDetailsModal()">Close</button>
</div>
</div>
<!-- JavaScript with pie chart integration -->

  <script defer src="js/constants.js"></script>
<script defer src="js/state.js"></script>
<script defer src="js/utils.js"></script>
<script defer src="js/charts.js"></script>
<script defer src="js/theme.js"></script>
<script defer src="js/search.js"></script>
<script defer src="js/sorting.js"></script>
<script defer src="js/pagination.js"></script>
<script defer src="js/detailsModal.js"></script>
<script defer src="js/spot.js"></script>
<script defer src="js/inventory.js"></script>
<script defer src="js/importExport.js"></script>
<script defer src="js/events.js"></script>
<script defer src="js/init.js"></script>
</body>
</html>